<!doctype html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <title>Undangan Athaya Myesha Safiyyah</title>

  <meta property="og:type" content="website">
  <meta property="og:url" content="https://ronnyrochili-dotcom.github.io/undangan-athaya/">
  <meta property="og:title" content="Undangan Tasmiyah & Aqiqah Athaya">
  <meta property="og:description" content="Tanpa mengurangi rasa hormat, kami mengundang Bapak/Ibu/Saudara/i untuk hadir dalam acara syukuran putri kami.">
  
  <meta property="og:image" content="https://i.ibb.co.com/ycHPBsfz/foto-2-persegi-crop.png">
  <meta property="og:image:secure_url" content="https://i.ibb.co.com/ycHPBsfz/foto-2-persegi-crop.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="600">
  <meta property="og:image:height" content="600">

  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:image" content="https://i.ibb.co.com/ycHPBsfz/foto-2-persegi-crop.png">

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  
  <style>
    /* CSS UNTUK TAMPILAN FULL WINDOW (100dvh) */
    html, body { 
      height: 100dvh; 
      margin: 0; 
      padding: 0; 
      width: 100%; 
      overflow: hidden; 
      background: #fdf2f8; 
    }
    body { font-family: 'Poppins', sans-serif; -webkit-font-smoothing: antialiased; }
    .font-playfair { font-family: 'Playfair Display', serif; }
    
    .main-wrapper { 
      background: linear-gradient(180deg, #fdf2f8 0%, #fce7f3 50%, #fbcfe8 100%); 
      position: relative; height: 100dvh; width: 100%; overflow-y: auto; -webkit-overflow-scrolling: touch;
    }
    
    #overlay { 
      position: fixed; top: 0; left: 0; width: 100%; height: 100dvh; 
      background: linear-gradient(to bottom, #fdf2f8, #fbcfe8); z-index: 1000; 
      display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 1s ease; 
    }

    #qris-modal, #admin-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100dvh; background: rgba(0,0,0,0.9); z-index: 2000; display: none; align-items: center; justify-content: center; padding: 20px; }
    
    .floating-music { position: fixed; bottom: 20px; left: 20px; z-index: 500; background: #ec4899; color: white; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(236,72,153,0.4); cursor: pointer; }
    .glass-card { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border-radius: 25px; border: 1px solid rgba(255, 255, 255, 0.4); }
    .btn-primary { background: linear-gradient(135deg, #ec4899 0%, #db2777 100%); color: white; font-weight: bold; border-radius: 1rem; transition: transform 0.2s; }
    .btn-primary:active { transform: scale(0.95); }
    .img-gallery { width: 100%; height: 180px; object-fit: cover; border-radius: 15px; border: 4px solid white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .countdown-box { background: white; border-radius: 12px; padding: 10px; min-width: 65px; border: 1px solid #f9a8d4; text-align: center; }
    
    .floating-ornament { position: absolute; opacity: 0.12; pointer-events: none; mix-blend-mode: multiply; will-change: transform; }
    .bounce-soft { animation: bounce-soft 8s ease-in-out infinite; }
    @keyframes bounce-soft { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
  </style>
</head>
<body>

  <audio id="myAudio" loop><source src="https://www.bensound.com/bensound-music/bensound-love.mp3" type="audio/mpeg"></audio>

  <div class="floating-music" onclick="toggleMusic()"><span id="music-icon">üéµ</span></div>
  
  <div onclick="openAdmin()" class="fixed bottom-5 right-5 z-[600] opacity-10 p-2 text-[10px] text-pink-600 font-bold uppercase cursor-pointer">üîë Admin</div>

  <div id="qris-modal" onclick="closeModal()">
    <div class="bg-white p-6 rounded-3xl max-w-sm w-full text-center relative" onclick="event.stopPropagation()">
      <button class="absolute top-2 right-4 text-gray-400 text-3xl leading-none" onclick="closeModal()">√ó</button>
      <h3 class="text-pink-700 font-bold text-xl mb-4 font-playfair uppercase">Kado Digital</h3>
      <img src="https://i.ibb.co.com/ch4xWYSW/Qris-RAMME-STORE.jpg" class="w-full h-auto rounded-xl shadow-md border" alt="QRIS">
      <p class="mt-4 font-bold text-pink-600 italic uppercase text-[10px]">Terima Kasih Atas Doa & Kadonya</p>
    </div>
  </div>

  <div id="admin-modal" class="fixed inset-0 z-[3000] hidden items-center justify-center p-4">
    <div class="bg-white w-full max-w-lg rounded-3xl p-6 overflow-hidden flex flex-col max-h-[90vh] shadow-2xl">
      <div class="flex justify-between items-center mb-4 border-b pb-2">
        <h3 class="text-pink-700 font-bold font-playfair">Data Tamu</h3>
        <div class="flex gap-2">
          <button onclick="exportExcel()" id="btn-export" class="hidden bg-green-600 text-white text-[10px] px-3 py-1 rounded-lg font-bold">Export Excel</button>
          <button onclick="closeAdmin()" class="text-3xl text-gray-400">√ó</button>
        </div>
      </div>
      <div id="admin-login" class="py-10 text-center">
        <input type="password" id="pass-field" placeholder="Password Admin" class="w-full p-4 border rounded-2xl mb-4 text-center outline-none border-pink-100 focus:border-pink-500">
        <button onclick="loginAdmin()" class="btn-primary w-full py-4 uppercase tracking-widest">Masuk</button>
      </div>
      <div id="admin-content" class="hidden overflow-y-auto">
        <table class="w-full text-[10px] text-left border-collapse">
          <thead class="bg-pink-50 sticky top-0 font-bold">
            <tr><th class="p-2 border border-pink-100">Nama</th><th class="p-2 border border-pink-100">Status</th><th class="p-2 border border-pink-100">Pesan</th></tr>
          </thead>
          <tbody id="guest-rows"></tbody>
        </table>
      </div>
    </div>
  </div>

  <div id="overlay">
    <div class="text-center p-6 relative z-[1100]">
      <div class="text-7xl mb-6 animate-bounce">üë∂</div>
      <h2 class="text-pink-700 font-playfair text-xl tracking-widest mb-3 uppercase font-bold text-center">Undangan<br>Tasmiyah & Aqiqah</h2>
      <h1 class="text-pink-600 font-playfair text-4xl font-bold mb-8 leading-tight text-center">Athaya Myesha Safiyyah</h1>
      <div class="mb-10 text-center">
        <p class="text-gray-500 text-xs italic mb-2 tracking-widest uppercase">Dengan Hormat Mengundang Bapak/Ibu/Saudara/i:</p>
        <h3 id="nama-tamu-display" class="text-pink-800 font-bold text-2xl px-6 py-2 border-y-2 border-pink-200 inline-block font-playfair italic">Tamu Undangan</h3>
      </div>
      <button onclick="bukaUndangan()" class="btn-primary px-12 py-4 rounded-full shadow-xl uppercase tracking-widest text-sm">Buka Undangan</button>
    </div>
  </div>

  <div class="main-wrapper">
    <svg class="floating-ornament bounce-soft" style="top: 5%; left: -5%; width: 150px; height: 150px;" viewbox="0 0 100 100"><circle cx="25" cy="25" r="15" fill="#fcd34d"/><circle cx="75" cy="25" r="15" fill="#fcd34d"/><ellipse cx="50" cy="70" rx="28" ry="32" fill="#d97706"/><circle cx="50" cy="40" r="25" fill="#fcd34d"/><circle cx="41" cy="38" r="4" fill="#1f2937"/><circle cx="59" cy="38" r="4" fill="#1f2937"/></svg>

    <div class="max-w-md mx-auto px-6 py-12 relative z-10 text-center">
      <section class="mb-16">
        <p class="text-3xl text-pink-700 mb-6 font-bold" style="font-family: 'Times New Roman';">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸíŸÖŸê</p>
        <p class="text-sm text-pink-600 italic font-light mb-4">"Merupakan suatu kehormatan dan kebahagiaan<br>Apabila Bapak/Ibu/Saudara/i berkenan hadir untuk memberikan doa kepada:"</p>
        <h2 class="text-5xl font-bold text-pink-700 font-playfair mb-4 leading-tight">Athaya Myesha Safiyyah</h2>
        <div class="h-1 w-20 bg-pink-400 mx-auto mb-8 rounded-full"></div>
        <p class="text-gray-500 text-[10px] uppercase tracking-widest mb-2 italic">Putri Ke Empat dari:</p>
        <p class="text-2xl font-bold text-pink-600 font-playfair uppercase">Ronny & Merry</p>
      </section>

      <section class="glass-card p-6 mb-12">
        <p class="text-pink-600 font-bold text-[10px] uppercase tracking-widest mb-4">Menuju Acara:</p>
        <div class="flex justify-center gap-2">
          <div class="countdown-box"><span id="days" class="block text-xl font-bold text-pink-600">00</span><span class="text-[9px] uppercase">Hari</span></div>
          <div class="countdown-box"><span id="hours" class="block text-xl font-bold text-pink-600">00</span><span class="text-[9px] uppercase">Jam</span></div>
          <div class="countdown-box"><span id="minutes" class="block text-xl font-bold text-pink-600">00</span><span class="text-[9px] uppercase">Menit</span></div>
          <div class="countdown-box"><span id="seconds" class="block text-xl font-bold text-pink-600">00</span><span class="text-[9px] uppercase">Detik</span></div>
        </div>
      </section>

      <section class="glass-card p-8 mb-16 space-y-4">
        <p class="font-bold text-gray-800 text-lg">Jum'at, 16 Januari 2026</p>
        <p class="text-gray-800 font-medium">09.00 WIB - Selesai</p>
        <p class="text-gray-600 text-sm italic leading-relaxed">Jl. Bumi Raya 1 Gg. Maju Bersama Jalur 3 No. 99, Kel. Baamang Barat, Sampit</p>
        <a href="https://maps.app.goo.gl/4bwXcp8v4ZqZiRHd7" target="_blank" class="block w-full btn-primary py-4 shadow-lg text-sm uppercase">Buka Google Maps</a>
      </section>

      <section class="mb-16">
        <h3 class="text-xl font-bold text-pink-700 font-playfair mb-6 italic">Galery Athaya</h3>
        <div class="grid grid-cols-2 gap-4">
          <img src="https://i.ibb.co.com/8nbJzNN5/foto-1-persegi.png" class="img-gallery" alt="Foto 1">
          <img src="https://i.ibb.co.com/ycHPBsfz/foto-2-persegi-crop.png" class="img-gallery" alt="Foto 2">
          <img src="https://i.ibb.co.com/VcntBRTS/foto-3-persegi.png" class="img-gallery" alt="Foto 3">
          <img src="https://i.ibb.co.com/pv1PLZ5B/foto-4-persegi.png" class="img-gallery" alt="Foto 4">
        </div>
      </section>

      <section class="glass-card p-8 mb-16">
        <h3 class="text-xl font-bold text-pink-700 font-playfair mb-4 italic">Kado Digital</h3>
        <p class="text-gray-600 text-sm mb-6 leading-relaxed">Tanpa mengurangi rasa hormat, Bapak/Ibu/Saudara/i dapat memberikan Kado Tanda Kasih secara digital melalui QRIS:</p>
        <button onclick="openModal()" class="w-full bg-white border-2 border-pink-400 text-pink-600 font-bold py-4 rounded-2xl flex items-center justify-center gap-3 active:bg-pink-50">
          <span>üì∏</span> TAMPILKAN QRIS
        </button>
      </section>

      <section class="glass-card p-8 mb-12">
        <h3 class="text-xl font-bold text-pink-700 font-playfair mb-6 text-center italic">Konfirmasi Kehadiran</h3>
        <form id="rsvp-form" onsubmit="handleFormSubmit(this)">
          <div class="space-y-4 text-left">
            <input type="text" name="nama" placeholder="Nama Lengkap" required class="w-full p-4 rounded-xl border border-pink-200 outline-none focus:border-pink-500">
            <select name="kehadiran" class="w-full p-4 rounded-xl border border-pink-200 bg-white">
              <option value="Hadir">Insya Allah Hadir</option>
              <option value="Berhalangan">Berhalangan Hadir</option>
            </select>
            <textarea name="pesan" rows="4" placeholder="Doa & Harapan..." required class="w-full p-4 rounded-xl border border-pink-200 outline-none focus:border-pink-500"></textarea>
            <button type="submit" id="submit-btn" class="w-full btn-primary py-4 shadow-xl uppercase tracking-widest">Kirim Konfirmasi</button>
          </div>
        </form>
        <p id="success-msg" class="hidden text-center mt-6 p-4 bg-green-50 text-green-700 rounded-xl font-bold italic shadow-inner">Syukron! Pesan Anda telah kami terima. ‚ú®</p>
      </section>

      <footer class="text-gray-400 text-[9px] tracking-[0.3em] uppercase pb-10">¬© 2026 Created by RAMME Project</footer>
    </div>
  </div>

  <script>
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxTIAk7Fr9r-5tC6amGarx5MoTwiIuPy0cLaGm3jCRxFPglKSq-ezR4KwynUbyM8FQ/exec"; 

    const audio = document.getElementById("myAudio");
    let masterData = [];

    function bukaUndangan() {
      // Masuk ke fullscreen mode
      const docElm = document.documentElement;
      if (docElm.requestFullscreen) { docElm.requestFullscreen(); }
      else if (docElm.webkitRequestFullscreen) { docElm.webkitRequestFullscreen(); }

      // Hilangkan overlay
      document.getElementById("overlay").style.opacity = "0";
      setTimeout(() => { document.getElementById("overlay").style.display = "none"; }, 1000);
      
      // Putar musik
      audio.play().catch(e => console.log("Autoplay blocked"));
      document.getElementById("music-icon").innerHTML = "‚è∏Ô∏è";
    }

    // Ambil Nama Tamu
    const urlParams = new URLSearchParams(window.location.search);
    const namaTamu = urlParams.get('to');
    if (namaTamu) { document.getElementById("nama-tamu-display").innerText = namaTamu.replace(/\+/g, ' '); }

    function toggleMusic() {
      if (audio.paused) { audio.play(); document.getElementById("music-icon").innerHTML = "‚è∏Ô∏è"; }
      else { audio.pause(); document.getElementById("music-icon").innerHTML = "üéµ"; }
    }

    function closeModal() { document.getElementById("qris-modal").style.display = "none"; }
    function openModal() { document.getElementById("qris-modal").style.display = "flex"; }
    function openAdmin() { document.getElementById("admin-modal").style.display = "flex"; }
    function closeAdmin() { document.getElementById("admin-modal").style.display = "none"; }

    function loginAdmin() {
      if (document.getElementById("pass-field").value === "admin191919") {
        document.getElementById("admin-login").classList.add("hidden");
        document.getElementById("admin-content").classList.remove("hidden");
        document.getElementById("btn-export").classList.remove("hidden");
        loadData();
      } else { alert("Password Salah!"); }
    }

    function loadData() {
      const tbody = document.getElementById("guest-rows");
      tbody.innerHTML = "<tr><td colspan='3' class='p-4 text-center italic'>Memuat data...</td></tr>";
      fetch(WEB_APP_URL + "?pass=admin191919")
        .then(res => res.json())
        .then(data => {
          masterData = data;
          tbody.innerHTML = "";
          data.slice().reverse().forEach(r => {
            const tr = document.createElement("tr");
            tr.innerHTML = `<td class="p-2 border border-pink-50 font-bold">${r[1]}</td><td class="p-2 border border-pink-50 text-center">${r[2]}</td><td class="p-2 border border-pink-50 text-gray-500 italic text-[9px]">${r[3]}</td>`;
            tbody.appendChild(tr);
          });
        }).catch(err => alert("Gagal memuat data admin."));
    }

    function handleFormSubmit(f) {
      event.preventDefault();
      const btn = document.getElementById("submit-btn");
      btn.innerText = "‚è≥ MENGIRIM...";
      btn.disabled = true;
      const rsvpData = { nama: f.nama.value, kehadiran: f.kehadiran.value, pesan: f.pesan.value };

      fetch(WEB_APP_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify(rsvpData) })
      .then(() => {
        f.reset();
        document.getElementById("success-msg").classList.remove("hidden");
        document.getElementById("rsvp-form").classList.add("hidden");
        btn.innerText = "TERKIRIM";
      }).catch(err => { 
        alert("Gagal mengirim RSVP."); 
        btn.disabled = false; 
        btn.innerText = "KIRIM KONFIRMASI";
      });
    }

    function exportExcel() {
      if(masterData.length === 0) return alert("Data kosong");
      let csvContent = "sep=,\r\n\uFEFF"; 
      csvContent += ["Waktu", "Nama Tamu", "Status Kehadiran", "Pesan/Doa"].join(",") + "\r\n";
      masterData.forEach(row => {
        let processedRow = row.map(cell => `"${String(cell).replace(/\r?\n|\r/g, " ").replace(/"/g, '""')}"`);
        csvContent += processedRow.join(",") + "\r\n";
      });
      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = url;
      link.setAttribute("download", "Data_Tamu_Athaya.csv");
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    // COUNTDOWN LOGIC
    const targetDate = new Date("Jan 16, 2026 09:00:00").getTime();
    setInterval(function() {
      const now = new Date().getTime();
      const diff = targetDate - now;
      if (diff < 0) return;
      document.getElementById("days").innerHTML = Math.floor(diff / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
      document.getElementById("hours").innerHTML = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
      document.getElementById("minutes").innerHTML = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
      document.getElementById("seconds").innerHTML = Math.floor((diff % (1000 * 60)) / 1000).toString().padStart(2, '0');
    }, 1000);
  </script>
</body>
</html>
